import Head from "next/head";
import ImageMeta from "../../components/image_meta";
import VideoMeta from "../../components/video_meta";
import Layout from "../../components/layout";
import Aside from "../../components/aside";
import Figure from "../../components/figure";
import Frame from "../../components/frame";
import readFile from "../../helpers/read_file";
import { createRef } from "react";

export let r, r2;

export const navigation = {
  breadcrumbs: [
    { text: "tuzz.tech", href: "/" },
    { text: "blog", href: "/blog" },
  ],
  links: [
    { text: "← Previous", href: "/blog/palindromic-superpermutations" },
    { text: "Next Article →" },
  ]
};

export const title = "Improving a commentary sidebar in React";
export const path = "/blog/improving-sidebar-react";
export const description = "TODO";

<Head>
  <meta property="og:title" content={title} />
  <meta property="og:url" content={`https://tuzz.tech${path}`} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="article" />

  <meta name="description" content={description} />
  <meta name="keywords" content="Chris Patuzzo,TODO" />
</Head>

<Layout title={title} navigation={navigation}>

<h1>{title}</h1>

<time dateTime="2019-10-28">Published October 28, 2019 by {" "}
<a href="https://twitter.com/chrispatuzzo">Chris Patuzzo</a>
</time>

<div className="note">
This is the second of two parts on this topic. Part one
is <a href="/blog/building-sidebar-react">here</a>.
</div>

<br/> <br/> <br/> <br/> <br/> <br/> <br/> <br/> <br/> <br/>


- high-level component explanation
  - getBoundingClientRect
  - absolute positioning
  - fade in once positioned
  - useEffect to run immediately
- what if content loading is slow?
  - delays hook
  - no ideal, but does the trick
- resize hook
  - dependent on target
  - race condition
  - could disable if below some width but I don't want coupling
- debouncing
  - more efficient, doesn't changes styles constantly
  - didn't write the book, but link to gist
  - still need to call align (not alignSoon) on page load
- printing
  - motivation
    - i don't think anyone will print
    - but i would like to provide offline pdfs - or maybe an ebook someday
    - perhaps use electron-pdf or puppeteer - be nice to use the same pipeline
    - might even help seo
  - by default, won't actually show the sidebar because of pixel width (670?)
  - once it doesn, the alignment is wrong... WHY?
    - link to chrome bug - is this why?
    - therefore, we need to explicitly tell it to re-align on print
    - print events: before, after, media selector
      - browser support?
  - write another hook
  - isn't perfect, but seems to work well enough in webkit
    - of course, more work is needed to make it actually look nice when printed
- quick conclusion
  - hooks make things neat and tidy
  - printing is a mess: seems weird you can't just print what you see
    - there is something in dev tools for this


</Layout>
